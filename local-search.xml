<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>æ³¨æ„åŠ›æœºåˆ¶</title>
    <link href="/2024/12/18/9-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/"/>
    <url>/2024/12/18/9-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<font size=3><p>å­¦ä¹ æ³¨æ„åŠ›æœºåˆ¶çš„åŸç†å’Œå®ç°ä»£ç </p><span id="more"></span><h1 id="1-æ³¨æ„åŠ›æœºåˆ¶"><a href="#1-æ³¨æ„åŠ›æœºåˆ¶" class="headerlink" title="1.æ³¨æ„åŠ›æœºåˆ¶"></a>1.æ³¨æ„åŠ›æœºåˆ¶</h1><p>æŸ¥è¯¢å¯¹è±¡Queryï¼Œè¢«æŸ¥è¯¢å¯¹è±¡Valueï¼Œé€šè¿‡å»è®¡ç®—Qå’ŒVé‡Œçš„äº‹ç‰©çš„<strong>ç›¸ä¼¼åº¦</strong>(æ›´æ¥è¿‘)ï¼Œæ¥åˆ¤æ–­å“ªäº›ä¸œè¥¿å¯¹Qæ¥è¯´æ›´é‡è¦ï¼Œå“ªäº›æ›´ä¸é‡è¦ã€‚</p><p>Qï¼Œ$K &#x3D;k_1,k_2,\cdots,k_n$</p><p>é€šè¿‡ç‚¹ä¹˜æ±‚å†…ç§¯çš„æ–¹æ³•è®¡ç®—Qå’ŒKé‡Œçš„æ¯ä¸€ä¸ªäº‹ç‰©çš„ç›¸ä¼¼åº¦ï¼Œå°±å¯ä»¥æ‹¿åˆ°Qå’Œ$k_1$çš„ç›¸ä¼¼åº¦å€¼$s_1$ã€Qå’Œ$k_2$çš„ç›¸ä¼¼åº¦å€¼$s_2$ã€Qå’Œ$k_n$çš„ç›¸ä¼¼åº¦å€¼$s_n$ã€‚è®¡ç®—$QK^T$åä¸ºé¿å…è¾“å…¥çš„å€¼å·®å¼‚è¿‡å¤§å¯¼è‡´Softmaxçš„æ¦‚ç‡å€¼è¿‡äºæç«¯ï¼Œéœ€è¦<strong>å½’ä¸€åŒ–</strong>ï¼Œå½’ä¸€åŒ–çš„æ–¹å¼æ˜¯<strong>é™¤ä»¥åµŒå…¥å‘é‡ç»´åº¦çš„å¹³æ–¹æ ¹ã€‚</strong></p><p>åšä¸€å±‚$softmax(s_1, s_2,\cdots,s_n)$å°±å¯ä»¥å¾—åˆ°æ¦‚ç‡$(a_1,a_2,\cdots,a_n)$ï¼Œè¿›è€Œæ‰¾åˆ°å“ªä¸ªäº‹ç‰©å¯¹Qæ›´é‡è¦ã€‚</p><p><img src="https://s2.loli.net/2024/12/18/ibh63dSvEWmJNG9.png" alt="image.png"></p><p>æœ€ååšä¸€ä¸ªæ±‡æ€»ï¼Œæ‹¿åˆ°**ç»è¿‡æ³¨æ„åŠ›è®¡ç®—ä¹‹åçš„å›¾ç‰‡$Vâ€™$**ï¼Œç°åœ¨è¿™å¼ å›¾ç‰‡ä¸­å¤šäº†ä¸€äº›ä¿¡æ¯ï¼Œå¤šäº†äºQè€Œè¨€æ›´é‡è¦ã€æ›´ä¸é‡è¦çš„ä¿¡æ¯ã€‚</p><p>$V&#x3D;(v_1, v_2, \cdots, v_n)$</p><p>$(a_1,a_2,\cdots,a_n) *+(v_1,v_2,\cdots,v_n)&#x3D;(a_1v_1+a_2v_2+\cdots+a_nv_n)$ &#x3D; Vâ€™</p><p><img src="https://s2.loli.net/2024/12/18/No5PiGVS4KZ2A9X.png" alt="image.png"></p><h1 id="2-è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-attention"><a href="#2-è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-attention" class="headerlink" title="2.è‡ªæ³¨æ„åŠ›æœºåˆ¶(Self-attention)"></a>2.è‡ªæ³¨æ„åŠ›æœºåˆ¶(Self-attention)</h1><p>åœ¨æ³¨æ„åŠ›æœºåˆ¶ä¸­ï¼Œä¸€èˆ¬æ¥è¯´Keyå’ŒValueæ˜¯ç›¸ç­‰çš„ï¼Œæˆ–è€…ä¸€å®šå…·æœ‰æŸç§å…³ç³»ã€‚è€ŒSelf-Attentionä¸­ï¼Œ Queryã€Keyã€Valueä¸‰è€…æ˜¯åŒæºçš„ï¼Œå³K$\approx$V$\approx$Qï¼Œæ¥æºäºåŒä¸€ä¸ªXã€‚</p><p><strong>å¯¹Xåˆ†åˆ«åšä¸‰æ¬¡çº¿æ€§å˜æ¢ï¼Œå¾—åˆ°Queryã€Keyã€Value</strong>ï¼Œé€šè¿‡Xæ‰¾åˆ°Xé‡Œé¢çš„å…³é”®ç‚¹ã€‚æ¥ä¸‹æ¥çš„æ­¥éª¤å’Œæ³¨æ„åŠ›æœºåˆ¶ä¸€æ¨¡ä¸€æ ·ï¼Œå¦‚å›¾ï¼Œåˆ—è¡¨ç¤ºä¸€ä¸ªä¸ªXè¯å‘é‡ï¼Œè¡Œè¡¨ç¤ºåˆ†åˆ«è¦å’Œå¥å­ä¸­çš„æ¯ä¸ªè¯åšä¸€ä¸‹ç›¸ä¼¼åº¦è®¡ç®—ã€‚</p><p>æ•ˆæœæ˜¯ï¼šç»™å®šä¸€ä¸ª Xï¼Œé€šè¿‡è‡ªæ³¨æ„åŠ›æ¨¡å‹ï¼Œå¾—åˆ°ä¸€ä¸ª Zï¼Œè¿™ä¸ª Z å°±æ˜¯å¯¹ X çš„æ–°çš„è¡¨å¾ï¼ˆè¯å‘é‡ï¼‰ï¼ŒZ è¿™ä¸ªè¯å‘é‡ç›¸æ¯”è¾ƒ X æ‹¥æœ‰äº†å¥æ³•ç‰¹å¾å’Œè¯­ä¹‰ç‰¹å¾ã€‚</p><p><img src="https://s2.loli.net/2024/12/18/mx1Rgsy7Sw9PAk2.png" alt="image.png"><br><img src="https://s2.loli.net/2024/12/18/UpFLilbYhmyWZXg.png" alt="image.png"></p><h1 id="3-å¤šå¤´è‡ªæ³¨æ„åŠ›-Multi-Head-Self-Attention"><a href="#3-å¤šå¤´è‡ªæ³¨æ„åŠ›-Multi-Head-Self-Attention" class="headerlink" title="3.å¤šå¤´è‡ªæ³¨æ„åŠ›(Multi-Head Self-Attention)"></a>3.å¤šå¤´è‡ªæ³¨æ„åŠ›(Multi-Head Self-Attention)</h1><h2 id="3-1-ä»€ä¹ˆæ˜¯å¤šå¤´"><a href="#3-1-ä»€ä¹ˆæ˜¯å¤šå¤´" class="headerlink" title="3.1 ä»€ä¹ˆæ˜¯å¤šå¤´"></a>3.1 ä»€ä¹ˆæ˜¯å¤šå¤´</h2><p>å¯¹äºX,æˆ‘ä»¬ä¸æ˜¯è¯´ï¼Œç›´æ¥æ‹¿ X å»å¾—åˆ° Zï¼Œè€Œæ˜¯æŠŠ X åˆ†æˆäº† 8 å—ï¼ˆ8 å¤´ï¼‰ï¼Œå¾—åˆ° Z0-Z7ï¼Œç„¶åæŠŠ Z0-Z7 æ‹¼æ¥èµ·æ¥ï¼Œå†åšä¸€æ¬¡çº¿æ€§å˜æ¢ï¼ˆæ”¹å˜ç»´åº¦ï¼‰å¾—åˆ° Zï¼Œä½¿å…¶å’ŒåŸæ¥çš„Xè¯å‘é‡ç»´åº¦ä¸€è‡´ã€‚</p><h2 id="3-2-æœ‰ä»€ä¹ˆä½œç”¨"><a href="#3-2-æœ‰ä»€ä¹ˆä½œç”¨" class="headerlink" title="3.2 æœ‰ä»€ä¹ˆä½œç”¨"></a>3.2 æœ‰ä»€ä¹ˆä½œç”¨</h2><p>æŠŠXåˆ‡æˆ8ä¸ªï¼Œè¿™æ ·åŸå…ˆåœ¨ä¸€ä¸ªä½ç½®çš„Xï¼Œå»äº†ç©ºé—´ä¸Šçš„8ä¸ªä½ç½®ï¼Œé€šè¿‡å¯¹8ä¸ªç‚¹è¿›è¡Œå¯»æ‰¾(éçº¿æ€§å˜æ¢ï¼Œæ˜ å°„åˆ°æ›´åˆç†çš„ç©ºé—´)ï¼Œæ‰¾åˆ°æ›´åˆé€‚çš„ä½ç½®ã€‚</p><p><img src="https://s2.loli.net/2024/12/18/f5kVD6dHu2UhzSn.png" alt="image.png"></p>]]></content>
    
    
    <categories>
      
      <category>metric-learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Attention mechanism</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åº¦é‡å­¦ä¹ æ€è·¯æ•´åˆ</title>
    <link href="/2024/12/09/8-%E5%BA%A6%E9%87%8F%E5%AD%A6%E4%B9%A0%E6%96%87%E7%8C%AE%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/"/>
    <url>/2024/12/09/8-%E5%BA%A6%E9%87%8F%E5%AD%A6%E4%B9%A0%E6%96%87%E7%8C%AE%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<font size=3><p>few-shot learningçš„åº¦é‡å­¦ä¹ æ–¹æ³•é˜…è¯»ä¸æ€»ç»“ï¼Œç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œè§£å†³few-shotçš„ä»¥ä¸‹é—®é¢˜ï¼š<br>åœ¨åŸºç±»ä¸Šï¼Œæ¨¡å‹å­¦ä¼šåŒºåˆ†ç›¸ä¼¼å’Œä¸ç›¸ä¼¼çš„å®ä¾‹ï¼Œä»è€Œæé«˜ä¸‹æ¸¸ä»»åŠ¡çš„æ€§èƒ½ï¼›<br>æ”¯æŒé›†çš„æ ·æœ¬è¿‡å°‘ï¼Œè®¡ç®—å¾—åˆ°çš„ç±»ä»£è¡¨åŸå‹å’Œå®é™…æœŸæœ›å¾—åˆ°çš„ç±»åŸå‹æœ‰è¾ƒå¤§åå·®ï¼Œå¦‚ä½•çŸ«æ­£<strong>æœ‰åçš„ç±»åŸå‹</strong>ï¼Œè¿›è€Œæé«˜æ¨¡å‹åˆ†ç±»ç²¾åº¦ã€‚</p><span id="more"></span><h2 id="1-Prototype-Rectification-for-Few-Shot-Learning"><a href="#1-Prototype-Rectification-for-Few-Shot-Learning" class="headerlink" title="1.Prototype Rectification for Few-Shot Learning"></a>1.Prototype Rectification for Few-Shot Learning</h2><h3 id="1-1-åŸºæœ¬ä¿¡æ¯"><a href="#1-1-åŸºæœ¬ä¿¡æ¯" class="headerlink" title="1.1 åŸºæœ¬ä¿¡æ¯"></a>1.1 åŸºæœ¬ä¿¡æ¯</h3><ul><li><p>2020å¹´ï¼ŒECCVä¼šè®®è®ºæ–‡</p></li><li><p>æ— å¼€æºæºç </p></li><li><p>æå‡ºäº†å¦‚ä½•å‡å°‘ç±»åŸå‹çš„åç½®ã€å‡å°‘supportå’Œquery datasetä¹‹é—´çš„åˆ†å¸ƒå·®ã€‚</p></li></ul><h3 id="1-2-æ–¹æ³•è®°å½•"><a href="#1-2-æ–¹æ³•è®°å½•" class="headerlink" title="1.2 æ–¹æ³•è®°å½•"></a>1.2 æ–¹æ³•è®°å½•</h3><h4 id="1-2-1-intra-class-bias"><a href="#1-2-1-intra-class-bias" class="headerlink" title="1.2.1 intra-class bias"></a>1.2.1 intra-class bias</h4><p>ä¸ºäº†å‡å°‘å®é™…è®¡ç®—å‡ºçš„åŸå‹å’ŒçœŸå®åŸå‹ä¹‹é—´çš„å·®è·ï¼Œé‡‡ç”¨<strong>ä¼ªæ ‡ç­¾ç­–ç•¥</strong>ï¼Œè¡¥å……<code>support set</code>çš„æ ·æœ¬ï¼Œç”±æ­¤å¾—åˆ°æ›´æ¥è¿‘çœŸå®çš„åŸå‹ã€‚å…·ä½“æ“ä½œæ˜¯å–<code>top-k</code>ä¸ªç½®ä¿¡åº¦çš„æœªæ ‡è®°æ ·æœ¬ï¼ŒåŠ ä¸Šä¼ªæ ‡ç­¾ï¼ŒåŠ å…¥<code>support set</code>ä¸€èµ·è®¡ç®—ç±»ä»£è¡¨åŸå‹ï¼Œå…¶ä¸­ä¸ºäº†é¿å…ä¼ªæ ‡ç­¾é”™åˆ†ç»™åŸå‹å¸¦æ¥å¤§çš„è¯¯å·®ï¼Œä½¿ç”¨<strong>åŠ æƒå’Œçš„å¹³å‡ä½œä¸ºä¿®æ”¹çš„åŸå‹</strong>ï¼Œæƒé‡çš„è®¡ç®—å…¬å¼ï¼šæ ·æœ¬å’Œbasic prototypesæœ‰æ›´å¤§çš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œåˆ™åœ¨ä¿®æ”¹çš„åŸå‹ä¸­æœ‰æ›´é«˜å æ¯”ã€‚</p><div class="note note-info">            <p>ä¼ªæ ‡ç­¾æœ‰ä¸€ä¸ªä½¿ç”¨å‰æï¼Œå³éœ€è¦ä¸€æ¬¡æ€§ç»™å‡ºæŸä¸ªç±»çš„æ‰€æœ‰æœªæ ‡è®°æ ·æœ¬ï¼Œä¸é€‚ç”¨äºä¸€ä¸ªä¸ªç»™æµ‹è¯•æ ·æœ¬çš„æƒ…å†µã€‚<br>åœ¨è„‘ç”µèº«ä»½è¯†åˆ«ä¸Šï¼Œä¸€ä¸ªäººä½œä¸ºä¸€ä¸ªç±»ï¼Œ<strong>ä»–çš„æµ‹è¯•æ ·æœ¬æ˜¯å¦å¯ä»¥ä¸€æ¬¡æ€§è·å–åˆ°ï¼Ÿ</strong>ï¼Œå†³å®šäº†ä¼ªæ ‡ç­¾æ˜¯å¦é€‚ç”¨ã€‚</p>          </div><h4 id="1-2-2-cross-class-bias"><a href="#1-2-2-cross-class-bias" class="headerlink" title="1.2.2 cross-class bias"></a>1.2.2 cross-class bias</h4><p>é¦–å…ˆä¸¤ä¸ªsetè¢«å‡è®¾ä¸ºåˆ†å¸ƒåœ¨åŒä¸€ä¸ªdomainä¸­ï¼Œä½†<code>support set</code>å’Œ<code>quary set</code>ä¹‹é—´å­˜åœ¨<strong>åˆ†å¸ƒå·®</strong>ï¼Œæå‡ºä¸ºäº†å‡å°‘ä¸¤è€…çš„åˆ†å¸ƒå·®ï¼Œå¯ä»¥æŠŠ<code>quary set</code>æœ<code>support set</code>ç§»åŠ¨ã€‚å…·ä½“åœ°ï¼Œæ–‡ç« æå‡ºç»™æ¯ä¸ªæ ‡å‡†åŒ–åçš„quary feature$\overline{X_q}$æ·»åŠ ä¸€ä¸ªè½¬æ¢å‚æ•°epilonã€‚<br><img src="https://s2.loli.net/2024/12/09/qnV2rhwZTyjYGM8.png" alt="image.png"></p><div class="note note-info">            <p>å‡å°åˆ†å¸ƒå·®ï¼Œè„‘ç”µèº«ä»½è¯†åˆ«ï¼Œsupport setç”¨çš„æ˜¯ç™»è®°sessionçš„æ ·æœ¬ï¼Œquary setå¯èƒ½ç”¨çš„æ˜¯å¦ä¸€ä¸ªsessionçš„æ ·æœ¬ï¼Œç”±äºæ—¶å˜æ€§ï¼Œä¸¤è€…çš„åˆ†å¸ƒå·®è‚¯å®šæ˜¯å­˜åœ¨çš„ï¼Œç”šè‡³äºåŒä¸€ä¸ªsessionï¼Œéšç€äººçŠ¶æ€çš„æ³¢åŠ¨ï¼Œæ ·æœ¬ä¹‹é—´ä¼°è®¡ä¹Ÿå­˜åœ¨æ˜æ˜¾çš„åˆ†å¸ƒå·®ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥ä¸€è¯•ã€‚</p>          </div><h2 id="2-Free-Lunch-for-Few-shot-Learning-Distribution-Calibration"><a href="#2-Free-Lunch-for-Few-shot-Learning-Distribution-Calibration" class="headerlink" title="2.Free Lunch for Few-shot Learning: Distribution Calibration"></a>2.Free Lunch for Few-shot Learning: Distribution Calibration</h2><h3 id="2-1-åŸºæœ¬ä¿¡æ¯"><a href="#2-1-åŸºæœ¬ä¿¡æ¯" class="headerlink" title="2.1 åŸºæœ¬ä¿¡æ¯"></a>2.1 åŸºæœ¬ä¿¡æ¯</h3><ul><li><p>2021å¹´ï¼ŒICLRä¼šè®®è®ºæ–‡</p></li><li><p>æºç ï¼š<a href="https://github.com/ShuoYang-1998/Few_Shot_Distribution_Calibration">Few_Shot_Distribution_Calibration</a></p></li><li><p>æå‡ºä»è¯­ä¹‰ç›¸ä¼¼çš„åŸºç±»(s)è¿ç§»ç»Ÿè®¡æ•°æ®æ¥æ ¡å‡†è¿™äº›å°‘æ•°æ ·æœ¬ç±»çš„åˆ†å¸ƒï¼Œæ¥ç€<strong>ä¾æ®æ–°åˆ†å¸ƒçš„å‡å€¼å’Œæ–¹å·®éšæœºé‡‡æ ·ä¸€å®šæ•°é‡çš„æ ·æœ¬</strong>ï¼Œå¯¹novel classesçš„n_way k_shotä»»åŠ¡çš„æ”¯æŒé›†è¿›è¡Œè¡¥å……ï¼Œè¡¥å……åçš„support set augè¾“å…¥åˆ†ç±»å™¨fitã€‚</p></li></ul><h3 id="2-2-æ–¹æ³•è®°å½•"><a href="#2-2-æ–¹æ³•è®°å½•" class="headerlink" title="2.2 æ–¹æ³•è®°å½•"></a>2.2 æ–¹æ³•è®°å½•</h3><p>å‰æå‡è®¾ï¼šå‡è®¾ç‰¹å¾åµŒå…¥çš„æ¯ä¸ªç»´åº¦éƒ½æœä»<strong>é«˜æ–¯åˆ†å¸ƒ</strong>ã€‚</p><p>è¿™ç¯‡ä»£ç <strong>åŸºç±»</strong>æ˜¯æœ‰å……è¶³æ ·æœ¬çš„ç±»ï¼Œç”¨åˆ«äººçš„SOTAåˆ†ç±»æ¨¡å‹ï¼Œå–å€’æ•°ç¬¬äºŒå±‚ä½œä¸ºç‰¹å¾æå–å™¨ï¼Œç”¨äºæå–åŸºç±»å’Œnovelç±»çš„ç‰¹å¾åµŒå…¥ã€‚æ¥ç€è®¡ç®—æ¯ä¸ªåŸºç±»ç‰¹å¾å±‚é¢çš„å‡å€¼å‘é‡å’Œåæ–¹å·®ã€‚</p><p>æµ‹è¯•ç±»(novel classes)ç”¨çš„æ˜¯è½®æ¬¡è®­ç»ƒçš„æ–¹å¼ï¼Œä¾‹å¦‚ï¼š</p>    <div class="fold">      <div class="fold-title fold-info collapsed" data-toggle="collapse" href="#collapse-8f7bdefe" role="button" aria-expanded="false" aria-controls="collapse-8f7bdefe">        <div class="fold-arrow">â–¶</div>FSLTaskå‚æ•°      </div>      <div class="fold-collapse collapse" id="collapse-8f7bdefe">        <div class="fold-content">          <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs PYTHON"><span class="hljs-comment"># ---- data loading</span><br>    dataset = <span class="hljs-string">&#x27;miniImagenet&#x27;</span><br>    n_shot = <span class="hljs-number">1</span><br>    n_ways = <span class="hljs-number">5</span><br>    n_queries = <span class="hljs-number">15</span><br>    n_runs = <span class="hljs-number">10000</span><br>    n_lsamples = n_ways * n_shot<br>    n_usamples = n_ways * n_queries<br>    n_samples = n_lsamples + n_usamples<br></code></pre></td></tr></table></figure>        </div>      </div>    </div><p>æ¯æ¬¡ä»novel classesä¸­æŠ½5ä¸ªç±»ï¼Œæ¯ä¸ªç±»æœ‰1ä¸ªsupport sampleï¼Œ15ä¸ªquery sampleã€‚æ¯ä¸€æ¬¡runï¼Œå¯¹æŠ½å–çš„5ä¸ªsupport_data(å…ˆè½¬æˆç‰¹å¾åµŒå…¥)åˆ†åˆ«åšåˆ†å¸ƒæ ¡å‡†ï¼Œç„¶åç”Ÿæˆè‹¥å¹²ä¸ªæ•°çš„ç‰¹å¾å‘é‡ä½œä¸ºsupporté›†çš„<strong>è¡¥å……</strong>ï¼Œä¸€èµ·è¾“å…¥åˆ†ç±»å™¨fitï¼Œåœ¨query samplesä¸Šæµ‹è¯•ï¼Œè®¡ç®—accï¼Œæœ€åå–10000æ¬¡runçš„å¹³å‡accã€‚</p><p>åˆ†å¸ƒæ ¡å‡†coreä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs PYTHON"><span class="hljs-keyword">def</span> <span class="hljs-title function_">distribution_calibration</span>(<span class="hljs-params">query, base_means, base_cov, k,alpha=<span class="hljs-number">0.21</span></span>):<br>    dist = []  <span class="hljs-comment"># è®¡ç®—support sample(å˜é‡åå«query)å’Œmeanä¹‹é—´çš„æ¬§å¼è·ç¦»</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(base_means)):<br>        dist.append(np.linalg.norm(query-base_means[i]))<br>    index = np.argpartition(dist, k)[:k]  <span class="hljs-comment"># ä»æ•°ç»„ dist ä¸­æ‰¾åˆ°å‰ğ‘˜å°çš„å…ƒç´ çš„ç´¢å¼•</span><br>    mean = np.concatenate([np.array(base_means)[index], query[np.newaxis, :]])<br>    calibrated_mean = np.mean(mean, axis=<span class="hljs-number">0</span>)<br>    calibrated_cov = np.mean(np.array(base_cov)[index], axis=<span class="hljs-number">0</span>)+alpha<br><br>    <span class="hljs-keyword">return</span> calibrated_mean, calibrated_cov<br></code></pre></td></tr></table></figure><div class="note note-primary">            <ol><li>è¿™ç¯‡æ–‡ç« åœ¨<strong>ç»†ç²’åº¦æ•°æ®é›†CUB</strong>ä¸Šä¹Ÿåº”ç”¨äº†DCæ–¹æ³•ï¼Œæœ‰è¶…è¿‡200ç§ä¸åŒçš„é¸Ÿç±»å›¾ç‰‡ã€‚æ¯ä¸ªäººçš„è„‘ç”µè™½ç„¶è¯´å„è‡ªæœ‰åˆ¤åˆ«æ€§ç‰¹å¾ï¼Œå…¶å®è¿˜æ˜¯å¾ˆç›¸ä¼¼çš„ç»†ç²’åº¦æ•°æ®ï¼Œè¿™ä¸ªæ–¹æ³•é€šè¿‡è¿ç§»<span class="label label-secondary">k</span>ä¸ªè·ç¦»æœ€å°çš„åŸºç±»çš„åˆ†å¸ƒï¼Œæ¥ç›´æ¥å¢åŠ æ”¯æŒé›†çš„æ ·æœ¬ï¼Œè¿›è€Œæé«˜åˆ†ç±»æ€§èƒ½ã€‚</li><li>è¦è°ƒçš„è¶…å‚æ•°å¤šï¼Œé‡‡æ ·ä¸ªæ•°ã€kä¸ªåŸºç±»ã€ç¦»æ•£ç¨‹åº¦aã€‚</li><li>åœ¨è„‘ç”µä¸Šæ˜¯å¦æœ‰æ•ˆå‘¢ï¼Ÿç‰¹å¾å‘é‡éƒ½æ˜¯ç»è¿‡æ ‡å‡†åŒ–&#x2F;å¹‚å˜æ¢çš„ã€‚</li></ol>          </div><h2 id="3-Semantic-Based-Implicit-Feature-Transform-for-Few-Shot-Classification"><a href="#3-Semantic-Based-Implicit-Feature-Transform-for-Few-Shot-Classification" class="headerlink" title="3.Semantic-Based Implicit Feature Transform for Few-Shot Classification"></a>3.Semantic-Based Implicit Feature Transform for Few-Shot Classification</h2><h3 id="3-1-åŸºæœ¬ä¿¡æ¯"><a href="#3-1-åŸºæœ¬ä¿¡æ¯" class="headerlink" title="3.1 åŸºæœ¬ä¿¡æ¯"></a>3.1 åŸºæœ¬ä¿¡æ¯</h3><ul><li><p>2024å¹´ï¼ŒInternational Journal of Computer Vision</p></li><li><p>æºç ï¼š<a href="https://github.com/pmhDL/SIFT.git">SIFT</a></p></li><li><p>å€Ÿé‰´çš„æ˜¯å‰é¢åˆ†å¸ƒçŸ«æ­£çš„è®ºæ–‡ï¼ŒåŒæ ·æ˜¯é€šè¿‡ä»åŸºç±»è¡¥å……ç‰¹å¾å‘é‡åˆ°novelç±»ä¸Šé¢å»ï¼Œä¸åŒçš„æ˜¯å›¾åƒç±»åˆ«æ ‡ç­¾ï¼ˆå¦‚catã€dogï¼‰ï¼Œ<strong>æœ¬èº«å…·æœ‰è¯­ä¹‰ä¿¡æ¯</strong>ï¼Œå¯ä»¥ç”¨ä¸åŒçš„è¯å‘é‡æ¥è¡¨è¾¾ã€‚ç„¶åé€šè¿‡è¯­ä¹‰åµŒå…¥çš„ç›¸ä¼¼åº¦æ¥é€‰æ‹©æœ€è¿‘çš„åŸºç±»ï¼Œè€Œä¸æ˜¯å‰é¢é€šè¿‡ç»Ÿè®¡ç‰¹å¾ã€‚</p></li></ul><h3 id="3-2-æ–¹æ³•è®°å½•"><a href="#3-2-æ–¹æ³•è®°å½•" class="headerlink" title="3.2 æ–¹æ³•è®°å½•"></a>3.2 æ–¹æ³•è®°å½•</h3><ul><li><p>è„‘ç”µçš„ç±»åˆ«æ ‡ç­¾çº¯ç²¹æ˜¯<span class="label label-secondary">'Person A'</span>ã€<span class="label label-secondary">'Person B'</span>çš„å½¢å¼ï¼Œå¹¶ä¸å…·æœ‰è¯­ä¹‰ä¿¡æ¯ï¼Œæ‰€ä»¥å¦‚æœè¦ç”¨ï¼Œåº”è¯¥é‡‡ç”¨Free Lunchçš„æ–¹æ³•<strong>åšè·¨æ—¶æ®µçš„åˆ†å¸ƒçŸ«æ­£</strong>ã€‚</p></li><li><p>æå‡ºäº†ä¸€ç§åŸå‹çŸ«æ­£çš„æ–¹æ³•ã€‚é€‚ç”¨äºtransductive settingï¼Œå³æŸ¥è¯¢æ ·æœ¬å…¨éƒ¨ä¸€æ¬¡ç»™å‡ºçš„æƒ…å†µã€‚é€šè¿‡K-meansæŠŠæŸ¥è¯¢æ ·æœ¬åˆ†ç°‡ä¸ºNç±»ï¼Œæ¥ç€å»ºç«‹è·¯å¾„è§„åˆ’é—®é¢˜çš„æ•°å­¦æ¨¡å‹ï¼Œä¸ºè¿™Nä¸ªç±»åˆ«ç¡®å®šäº’ç›¸ä¸é‡å¤çš„æ ‡ç­¾ï¼Œä¸åˆå§‹çš„æ¯ä¸ªç±»åŸå‹åšå¹³å‡ã€‚</p></li></ul>    <div class="fold">      <div class="fold-title fold-info collapsed" data-toggle="collapse" href="#collapse-6ae3e036" role="button" aria-expanded="false" aria-controls="collapse-6ae3e036">        <div class="fold-arrow">â–¶</div>åŸå‹çŸ«æ­£å®ç°      </div>      <div class="fold-collapse collapse" id="collapse-6ae3e036">        <div class="fold-content">          <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs PYTHON"><span class="hljs-keyword">def</span> <span class="hljs-title function_">updateproto</span>(<span class="hljs-params">Xs, ys, cls_center, way</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;æ›´æ–°åŸå‹ (prototype)ï¼Œå¹¶ä¸èšç±»ä¸­å¿ƒ (cluster center) ç»“åˆ&quot;&quot;&quot;</span><br>    <br>    <span class="hljs-comment"># è°ƒç”¨ np_proto è®¡ç®—æ¯ä¸ªç±»åˆ«çš„åŸå‹</span><br>    proto = np_proto(Xs, ys, way)  <br>    <br>    <span class="hljs-comment"># è®¡ç®—æ¯ä¸ªç±»åˆ«åŸå‹ä¸æ‰€æœ‰èšç±»ä¸­å¿ƒä¹‹é—´çš„å¹³æ–¹æ¬§å¼è·ç¦»</span><br>    <span class="hljs-comment"># ä½¿ç”¨å¹¿æ’­æœºåˆ¶ï¼Œæ‰©å±• proto å’Œ cls_center çš„ç»´åº¦åç›¸å‡</span><br>    dist = ((proto[:, np.newaxis, :] - cls_center[np.newaxis, :, :]) ** <span class="hljs-number">2</span>).<span class="hljs-built_in">sum</span>(<span class="hljs-number">2</span>)  <br>    <br>    <span class="hljs-comment"># æ‰¾åˆ°æ¯ä¸ªç±»åˆ«åŸå‹è·ç¦»æœ€è¿‘çš„èšç±»ä¸­å¿ƒç´¢å¼•</span><br>    <span class="hljs-built_in">id</span> = dist.argmin(<span class="hljs-number">1</span>)  <br>    feat_proto = np.zeros((way, Xs.shape[<span class="hljs-number">1</span>]))  <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(way):<br>        <span class="hljs-comment"># å°†å½“å‰ç±»åˆ«çš„åŸå‹å’Œå…¶æœ€è¿‘çš„èšç±»ä¸­å¿ƒå–å¹³å‡å€¼</span><br>        feat_proto[i] = (cls_center[<span class="hljs-built_in">id</span>[i]] + proto[i]) / <span class="hljs-number">2</span>  <br>    <br>    <span class="hljs-keyword">return</span> feat_proto  <br></code></pre></td></tr></table></figure>        </div>      </div>    </div><h2 id="4-Matching-Feature-Sets-for-Few-Shot-Image-Classification"><a href="#4-Matching-Feature-Sets-for-Few-Shot-Image-Classification" class="headerlink" title="4.Matching Feature Sets for Few-Shot Image Classification"></a>4.Matching Feature Sets for Few-Shot Image Classification</h2><h3 id="4-1-åŸºæœ¬ä¿¡æ¯"><a href="#4-1-åŸºæœ¬ä¿¡æ¯" class="headerlink" title="4.1 åŸºæœ¬ä¿¡æ¯"></a>4.1 åŸºæœ¬ä¿¡æ¯</h3><ul><li><p>2022å¹´ï¼ŒCVPRä¼šè®®è®ºæ–‡</p></li><li><p>æºç ï¼š<a href="https://lvsn.github.io/SetFeat/">SetFeat-fs</a></p></li><li><p>æå‡ºâ€¦</p></li><li></li></ul></font>]]></content>
    
    
    <categories>
      
      <category>metric-learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>paper</tag>
      
      <tag>metric-learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PowerPointä¿®ç‚¼</title>
    <link href="/2024/12/07/7.ppt%E6%8A%80%E5%B7%A7%E7%AC%94%E8%AE%B0/"/>
    <url>/2024/12/07/7.ppt%E6%8A%80%E5%B7%A7%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<font size=3><h1 id="1-PPTæ•´ä½“å±•ç¤ºå›¾è¡¨ä¹‹åå±€éƒ¨é«˜äº®"><a href="#1-PPTæ•´ä½“å±•ç¤ºå›¾è¡¨ä¹‹åå±€éƒ¨é«˜äº®" class="headerlink" title="1.PPTæ•´ä½“å±•ç¤ºå›¾è¡¨ä¹‹åå±€éƒ¨é«˜äº®"></a>1.PPTæ•´ä½“å±•ç¤ºå›¾è¡¨ä¹‹åå±€éƒ¨é«˜äº®</h1><p><a href="https://www.bilibili.com/video/BV13r4y1c7r1/?vd_source=a9e78e47d3e6d67d875c0260caff8550">æ­¥éª¤æ•™å­¦</a></p><p><img src="https://s2.loli.net/2024/12/07/KUh4etcvqSk2BDd.gif" alt="ppt.gif"></p><h1 id="2-Others"><a href="#2-Others" class="headerlink" title="2.Others"></a>2.Others</h1><ul><li><a href="https://www.freeconvert.com/zh/convert/video-to-gif">è§†é¢‘è½¬GIFå·¥å…·</a></li><li><a href="https://blog.csdn.net/weixin_38314865/article/details/104440652">PPTç«‹æ–¹ä½“å½¢çŠ¶å˜è–„</a></li></ul></font>]]></content>
    
    
    
    <tags>
      
      <tag>PPT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è¯„ä¼°æŒ‡æ ‡è®°å½•</title>
    <link href="/2024/12/05/6.%E5%88%86%E7%B1%BB%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87/"/>
    <url>/2024/12/05/6.%E5%88%86%E7%B1%BB%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87/</url>
    
    <content type="html"><![CDATA[<font size=3><p>ç”µå­ç¬”è®°</p><span id="more"></span><h1 id="1-AUC-are-under-curve"><a href="#1-AUC-are-under-curve" class="headerlink" title="1.AUC(are under curve)"></a>1.AUC(are under curve)</h1><h2 id="1-1ä»€ä¹ˆæ˜¯AUC"><a href="#1-1ä»€ä¹ˆæ˜¯AUC" class="headerlink" title="1.1ä»€ä¹ˆæ˜¯AUC"></a>1.1ä»€ä¹ˆæ˜¯AUC</h2><p>ç”¨äºè¯„ä¼°åˆ†ç±»å™¨çš„åˆ†ç±»æ•ˆæœï¼Œå¯¹äºçœŸå®ç±»åˆ«ä¸º1çš„æ ·æœ¬ï¼Œåˆ†ç±»å™¨é¢„æµ‹ä¸º1çš„æ¦‚ç‡(å³TPrate)è¦å¤§äºçœŸå®ç±»åˆ«ä¸º0è€Œé¢„æµ‹ç±»åˆ«ä¸º1çš„æ¦‚ç‡(å³FPrate)ï¼Œå³AUC&gt;0.5ã€‚</p><h2 id="1-2å¦‚ä½•è®¡ç®—AUC"><a href="#1-2å¦‚ä½•è®¡ç®—AUC" class="headerlink" title="1.2å¦‚ä½•è®¡ç®—AUC"></a>1.2å¦‚ä½•è®¡ç®—AUC</h2><p>åœ¨æœ‰Mä¸ªæ­£æ ·æœ¬,Nä¸ªè´Ÿæ ·æœ¬çš„æ•°æ®é›†é‡Œã€‚ä¸€å…±æœ‰M*Nå¯¹æ ·æœ¬ï¼ˆä¸€å¯¹æ ·æœ¬å³ä¸€ä¸ªæ­£æ ·æœ¬ä¸ä¸€ä¸ªè´Ÿæ ·æœ¬ï¼‰ã€‚ç»Ÿè®¡è¿™M*Nå¯¹æ ·æœ¬é‡Œï¼Œæ­£æ ·æœ¬çš„é¢„æµ‹æ¦‚ç‡å¤§äºè´Ÿæ ·æœ¬çš„é¢„æµ‹æ¦‚ç‡çš„ä¸ªæ•°ã€‚<br><img src="https://s2.loli.net/2024/12/09/lj6xh4XCm7oqgDu.png" alt="image.png"></p><h2 id="1-3æ¥å£å‚æ•°å«ä¹‰"><a href="#1-3æ¥å£å‚æ•°å«ä¹‰" class="headerlink" title="1.3æ¥å£å‚æ•°å«ä¹‰"></a>1.3æ¥å£å‚æ•°å«ä¹‰</h2><p><code>roc_auc_score(test_labels, probs, multi_class=&#39;ovr&#39;)</code></p><div class="note note-info">            <ol><li>test_labels: å®é™…çš„ç±»åˆ«æ ‡ç­¾ï¼Œshapeæ˜¯ [N,]</li><li>probs: æ¯ä¸ªæ ·æœ¬åœ¨å„ä¸ªç±»åˆ«ä¸Šçš„æ¦‚ç‡ï¼Œshapeæ˜¯[N, C]</li><li>æŒ‡å®šè®¡ç®—å¤šç±»åˆ«é—®é¢˜çš„ AUC (<strong>One-vs-Rest ç­–ç•¥</strong>)</li></ol>          </div><h1 id="2-AccuracyCalculatorä½¿ç”¨"><a href="#2-AccuracyCalculatorä½¿ç”¨" class="headerlink" title="2.AccuracyCalculatorä½¿ç”¨"></a>2.AccuracyCalculatorä½¿ç”¨</h1><p>åœ¨<strong>pytorch-metric-learning</strong>ä¸­ï¼ŒAccuracyCalculatorä¸»è¦ç”¨äºè®¡ç®—å‡†ç¡®ç‡ï¼ˆå¦‚ top-k å‡†ç¡®ç‡ï¼‰ã€‚é€šè¿‡åµŒå…¥å‘é‡ä¹‹é—´çš„ç›¸ä¼¼åº¦æ¥æ¨æµ‹æ¯ä¸ªæ ·æœ¬çš„ç±»åˆ«ï¼Œå¹¶ä¸çœŸå®æ ‡ç­¾è¿›è¡Œæ¯”è¾ƒï¼Œç›¸åŒåˆ™é¢„æµ‹æ­£ç¡®ã€‚è¿™ç§æ–¹æ³•æ˜¯åŸºäº<strong>æœ€è¿‘é‚»</strong>æ¥åˆ¤æ–­ç±»åˆ«ï¼Œé¢„æµ‹å‡†ç¡®ç‡çš„ã€‚</p><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> pytorch_metric_learning <span class="hljs-keyword">import</span> losses<br><span class="hljs-keyword">from</span> pytorch_metric_learning.utils.accuracy_calculator <span class="hljs-keyword">import</span> AccuracyCalculator<br><br><span class="hljs-comment"># åˆå§‹åŒ– AccuracyCalculator: å‚æ•°kå€¼ï¼ŒæŒ‡å®š top-k ç²¾åº¦</span><br>accuracy_calculator = AccuracyCalculator(k=<span class="hljs-number">1</span>)<br><br><span class="hljs-comment"># è®¡ç®—å‡†ç¡®ç‡</span><br>accuracy = accuracy_calculator.calculate(<br>    embeddings=embeddings,  <span class="hljs-comment"># æ¨¡å‹è¾“å‡ºçš„åµŒå…¥å‘é‡ [batch_size, embedding_dim]</span><br>    labels=labels,          <span class="hljs-comment"># æ ‡ç­¾ [batch_size]</span><br>)<br></code></pre></td></tr></table></figure><h1 id="3-èµ„æ–™"><a href="#3-èµ„æ–™" class="headerlink" title="3.èµ„æ–™"></a>3.èµ„æ–™</h1><ul><li><a href="https://www.zhihu.com/question/39840928?from=profile_question_card">AUCå¦‚ä½•ç†è§£ï¼Ÿ</a></li><li><a href="https://blog.csdn.net/qq_22238533/article/details/78666436">AUCçš„è®¡ç®—æ–¹æ³•</a></li></ul></font>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
      <tag>sklearn</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ear-EEGæ•°æ®é›†è°ƒç ”</title>
    <link href="/2024/11/27/5.Ear-EEG%E6%95%B0%E6%8D%AE%E9%9B%86%E8%B0%83%E7%A0%94/"/>
    <url>/2024/11/27/5.Ear-EEG%E6%95%B0%E6%8D%AE%E9%9B%86%E8%B0%83%E7%A0%94/</url>
    
    <content type="html"><![CDATA[<font size=3><p>æœ‰å…³<strong>è€³è„‘ç”µ</strong>çš„æ¦‚è¿°ã€4ä¸ªåº”ç”¨ç±»åˆ«çš„å¯è¡Œæ€§ã€å…¬å¼€æ•°æ®é›†çš„ææ–™è°ƒç ”ã€‚</p><span id="more"></span><h1 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1.æ¦‚è¿°"></a>1.æ¦‚è¿°</h1><p>å’Œå…¨å¤´çš®è„‘ç”µç±»ä¼¼ï¼Œear-EEGåŒæ ·æ˜¯é€šè¿‡åœ¨çš®è‚¤ä¸Šæ”¾ç½®ç”µæè®°å½•å¾®å°çš„ç”µå‹å˜åŒ–ï¼Œä»¥æµ‹é‡åŠ¨æ€çš„å¤§è„‘æ´»åŠ¨ã€‚ç”µæä¼ æ„Ÿå™¨å¯ä»¥æ”¾ç½®åœ¨å¤–è€³çš„ä¸åŒä½ç½®ï¼ˆè€³å»“ã€è€³ç”²ã€è€³é“ï¼‰ï¼Œæ£€æµ‹è®¾å¤‡ææ–™ç§ç±»å¾ˆå¤šï¼Œæµ‹é‡æ–¹å¼ä¹Ÿåˆ†å¹²&#x2F;æ¹¿ç”µæï¼Œä½†æ˜¯<strong>ä¸å¤´çš®è„‘ç”µç›¸æ¯”ï¼Œè€³è„‘ç”µçš„ç”µæéƒ¨ç½²æ•°é‡å°‘ï¼Œä¸”ä¿¡å·å¹…åº¦(signal amplitude)æ˜æ˜¾ä½äºå¤´çš®è„‘ç”µ</strong>10-20dBã€‚</p><p>è€³è„‘ç”µé è¿‘<strong>é¢å¶(Temporal Lobe)åŒºåŸŸ</strong>ï¼Œè¿™ä¸ªåŒºåŸŸå’Œå¬è§‰ã€è¯­è¨€å¤„ç†ã€è®°å¿†å’Œæƒ…æ„Ÿéƒ½ç›¸å…³ï¼Œåœ¨äº‹ä»¶ç›¸å…³ç”µä½(ERPs)ã€è„‘æœºæ¥å£(BCI)ã€ç¡çœ ã€ç™«ç—«4ä¸ªé¢†åŸŸéƒ½å·²æœ‰ç ”ç©¶æ¥è¯æ˜è€³è„‘ç”µä¿¡å·çš„å¯è¡Œæ€§ã€‚</p><h1 id="2-åº”ç”¨é¢†åŸŸ"><a href="#2-åº”ç”¨é¢†åŸŸ" class="headerlink" title="2.åº”ç”¨é¢†åŸŸ"></a>2.åº”ç”¨é¢†åŸŸ</h1><h2 id="2-1-äº‹ä»¶ç›¸å…³ç”µä½"><a href="#2-1-äº‹ä»¶ç›¸å…³ç”µä½" class="headerlink" title="2.1 äº‹ä»¶ç›¸å…³ç”µä½"></a>2.1 äº‹ä»¶ç›¸å…³ç”µä½</h2><p>ERPæ˜¯æµ‹é‡çš„å¤§è„‘å¯¹è§†è§‰ã€å£°éŸ³æˆ–è§¦è§‰çš„çŸ­æš‚åˆºæ¿€çš„ååº”ã€‚è€³è„‘ç”µè¢«è¯æ˜å¯å¯é æµ‹é‡å‡ ä¸ªç†ŸçŸ¥çš„ERPsï¼Œè€³è„‘ç”µå®ç°çš„EEGè¯±å‘èŒƒå¼å¤§å¤šæ•°ä¸å¬è§‰åˆºæ¿€æœ‰å…³ï¼ŒåŒ…æ‹¬<strong>å¬è§‰è¯±å‘ç”µä½</strong>(auditory-evoked potentialsï¼ŒAEPs)å’Œ<strong>å¬è§‰ç¨³æ€ç”µä½</strong>(multiple auditory-steady responses, ASSR)ï¼Œä»¥åŠ<strong>SSVEP</strong>ã€‚</p><h2 id="2-2-è„‘æœºæ¥å£"><a href="#2-2-è„‘æœºæ¥å£" class="headerlink" title="2.2 è„‘æœºæ¥å£"></a>2.2 è„‘æœºæ¥å£</h2><p>BCIsæ˜¯ç”¨äºè§£ç ç”µç”Ÿç†ä¿¡å·å»æ§åˆ¶ä¸€ä¸ªå¤–éƒ¨è®¾å¤‡çš„æŠ€æœ¯ã€‚ç»¼è¿°ä¸­ä»‹ç»äº†å¤šç¯‡paperé‡‡é›†è€³è„‘ç”µç„¶åç”¨äºæ³¨æ„åŠ›çŠ¶æ€é‰´åˆ«ã€é©¾é©¶å‘˜å—œç¡åˆ†ç±»ã€‚</p><h2 id="2-3-ç¡çœ "><a href="#2-3-ç¡çœ " class="headerlink" title="2.3 ç¡çœ "></a>2.3 ç¡çœ </h2><p>è€³è„‘ç”µé€‚åˆäºé•¿æœŸçš„ç›‘æµ‹ç¡çœ è´¨é‡ï¼Œè€³å†…ä¼ æ„Ÿå™¨è·å–çš„æ•°æ®å¯ä»¥è¢«ç”¨äºç¡çœ åˆ†æœŸçš„è¯„ä¼°ï¼Œä½†ä¹Ÿæåˆ°è€³è„‘ç”µçš„<strong>amplitude</strong>æ¯”æ ‡å‡†EEGä½ã€‚</p><h2 id="2-4-ç™«ç—«"><a href="#2-4-ç™«ç—«" class="headerlink" title="2.4 ç™«ç—«"></a>2.4 ç™«ç—«</h2><p>é€‚åˆé•¿æœŸç›‘æµ‹ï¼ŒæŒ‡å‡ºè€³è„‘ç”µé€‚åˆè®°å½•é¢å¶ç™«ç—«ä¿¡å·ï¼Œå¹¶ç”¨äºç™«ç—«è¯„ä¼°ã€‚</p><h1 id="3-å…¬å¼€æ•°æ®é›†"><a href="#3-å…¬å¼€æ•°æ®é›†" class="headerlink" title="3.å…¬å¼€æ•°æ®é›†"></a>3.å…¬å¼€æ•°æ®é›†</h1><h2 id="3-1-ç¡çœ ç›‘æµ‹"><a href="#3-1-ç¡çœ ç›‘æµ‹" class="headerlink" title="3.1 ç¡çœ ç›‘æµ‹"></a>3.1 ç¡çœ ç›‘æµ‹</h2><ul><li><a href="https://openneuro.org/datasets/ds004348/versions/1.0.5">Ear-EEG Sleep Monitoring 2017 (EESM17)</a></li></ul><p>ç¡çœ ç›‘æµ‹æ•°æ®é›†ï¼ŒåŒ…å«9åå—è¯•è€…çš„å¤œé—´è„‘ç”µå›¾è®°å½•ã€‚è¿™äº›recordingåŒ…æ‹¬<strong>è„‘ç”µå›¾ã€çœ¼ç”µå›¾å’Œä¸‹å·´è‚Œç”µå›¾ï¼Œä»¥åŠ 14 ä¸ªè€³éƒ¨è„‘ç”µå›¾ç”µæ</strong>ã€‚</p><p>labelåˆ†ä¸ºä¸¤ç±»ï¼Œ1:wake; 2:sleep</p><h2 id="3-2-è¿åŠ¨æƒ³è±¡"><a href="#3-2-è¿åŠ¨æƒ³è±¡" class="headerlink" title="3.2 è¿åŠ¨æƒ³è±¡"></a>3.2 è¿åŠ¨æƒ³è±¡</h2><ul><li><a href="https://ieee-dataport.org/open-access/ear-eeg-recording-brain-computer-interface-motor-task">Ear-EEG Recording for Brain Computer Interface of Motor Task</a></li></ul><p>å·¦&#x2F;å³æ‰‹æŠ“æ¡è¿åŠ¨æƒ³è±¡æ•°æ®é›†ï¼ŒåŒ…æ‹¬6ä¸ªå—è¯•è€…ã€‚è€³éƒ¨è„‘ç”µå›¾ä¸å¤´çš®è„‘ç”µå›¾åŒæ—¶è®°å½•ã€‚8ä¸ªè€³ç”µææ”¾ç½®åœ¨å‰è€³é“å’Œåè€³é“ï¼ˆæ ‡è®°ä¸º xFã€xBï¼‰<br>ä»¥åŠè€³ç”²çš„ä¸¤ä¸ªä¸Šéƒ¨å’Œä¸‹éƒ¨ä½ç½®ï¼ˆæ ‡è®°ä¸º xOU å’Œ xODï¼‰ã€‚æ‰€æœ‰è€³éƒ¨å’Œå¤´çš®ç”µæå‡ä»¥å¤´çš®REFç”µæä¸ºå‚è€ƒã€‚<br>å¤´çš®GRDç”µæç”¨ä½œæ¥åœ°å‚è€ƒã€‚ä»¥1000 Hzé‡‡æ ·ä¿¡å·ï¼Œç„¶åç”¨0.5 Hzè‡³100 Hzä¹‹é—´çš„å¸¦é€šæ»¤æ³¢å™¨å’Œé™·æ³¢æ»¤æ³¢å™¨è¿›è¡Œæ»¤æ³¢ã€‚</p><h2 id="3-3-SSVEP"><a href="#3-3-SSVEP" class="headerlink" title="3.3 SSVEP"></a>3.3 SSVEP</h2><ul><li><a href="http://deepbci.korea.ac.kr/opensource/opendb/">EEG Dataset for SSVEP using Ear-EEG and Scalp-EEG</a></li></ul><p>æ•°æ®é›†æ˜¯éŸ©å›½çš„ä¸€ä¸ªç½‘ç«™ï¼Œéœ€è¦ç”³è¯·ï¼š<br><img src="https://s2.loli.net/2024/11/28/XMAbZFmxgo6rzfL.png" alt="image.png"></p><ul><li><a href="https://ieeexplore.ieee.org/abstract/document/8758838">è®ºæ–‡_åŒ…å«å®éªŒèŒƒå¼</a></li></ul><h3 id="3-3-1-è®ºæ–‡æ‘˜è¦"><a href="#3-3-1-è®ºæ–‡æ‘˜è¦" class="headerlink" title="3.3.1 è®ºæ–‡æ‘˜è¦"></a>3.3.1 è®ºæ–‡æ‘˜è¦</h3><p>è€³-è„‘ç”µå¯¹ç”µæä½ç½®æœ‰è‡ªç„¶çš„é™åˆ¶(ä¾‹å¦‚ï¼Œé™åˆ¶åœ¨è€³å†…æˆ–è€³å‘¨å›´)ï¼Œæ— æ³•å……åˆ†è·å–ä¿¡æ¯ä¸°å¯Œçš„å¤§è„‘ä¿¡å·ã€‚åœ¨ç‰¹å®šçš„BCIèŒƒå¼ä¸­ï¼Œä¸åˆ©ç”¨<strong>è€³å‘¨å›´é¢å¶çš„è„‘ä¿¡å·</strong>ï¼Œå®ç°å¯é çš„è€³-è„‘ç”µæ€§èƒ½æ˜¯å›°éš¾çš„ã€‚<br>ä¾‹å¦‚ï¼Œ<strong>ç¨³æ€è§†è§‰è¯±å‘ç”µä½(SSVEPs)ä¸»è¦äº§ç”Ÿäºæ•åŒºï¼Œåœ¨è€³-è„‘ç”µä¸­å…·æœ‰æ˜æ˜¾çš„è¡°å‡å’Œæ‰­æ›²å¹…åº¦ã€‚</strong>å› æ­¤ï¼Œä¿æŒé«˜æ°´å¹³çš„è§£ç ç²¾åº¦å¯¹äºåŸºäºè€³-è„‘ç”µçš„SSVEP BCIæ˜¯å…·æœ‰æŒ‘æˆ˜æ€§å’Œå¿…è¦çš„ã€‚<br>æœ¬æ–‡é¦–å…ˆç ”ç©¶äº†åœ¨SSVEPèŒƒå¼ä¸‹ï¼Œåˆ©ç”¨æ•åŒºä¼°è®¡çš„ç›®æ ‡è„‘ç”µä¿¡å·ï¼Œé‡‡ç”¨çº¿æ€§å’Œéçº¿æ€§å›å½’æ–¹æ³•æ¥æé«˜è€³-è„‘ç”µè§£ç ç²¾åº¦ã€‚â€¦</p><h3 id="3-3-2-å®éªŒèŒƒå¼"><a href="#3-3-2-å®éªŒèŒƒå¼" class="headerlink" title="3.3.2 å®éªŒèŒƒå¼"></a>3.3.2 å®éªŒèŒƒå¼</h3><p>å®éªŒä¸€å…±3ä¸ªsessionï¼Œå‰ä¸¤ä¸ªsessionåŒæ—¶è®°å½•å¤´çš®è„‘ç”µå’Œè€³è„‘ç”µï¼Œç¬¬3ä¸ªsessionåªè®°å½•è€³è„‘ç”µã€‚åˆºæ¿€é¢‘ç‡æœ‰3ç§ï¼Œä¸€æ¬¡trialèŒƒå¼å¦‚å›¾æ‰€ç¤ºã€‚<br><img src="https://s2.loli.net/2024/11/28/EtQj2Y6CcBbxryN.png" alt="image.png"></p><p>11ä¸ªsubjectsï¼Œé‡‡æ ·é¢‘ç‡500hzï¼Œ0.3-50 Hzçš„å¸¦é€šæ»¤æ³¢å™¨å’Œ60Hzé™·æ³¢æ»¤æ³¢å™¨ã€‚</p><ul><li>session1 å’Œ session2ï¼Œæ¯ç±»åˆºæ¿€50ä¸ªtrialï¼Œä¸€å…±150trialã€‚</li><li>session3ï¼Œåªè·å–è€³-è„‘ç”µå›¾ä¿¡å·ï¼Œæ¯ä¸ªç±»20ä¸ªtrialï¼Œä¸€å…±60ä¸ªtrialã€‚</li><li>ä¸‰ä¸ªsessionæ˜¯ä¸åœ¨<strong>ä¸åŒçš„å¤©</strong>è·å¾—çš„ã€‚</li></ul><p><img src="https://s2.loli.net/2024/11/28/hEjdCFwfsqXQLW5.png" alt="image.png"></p><h1 id="4-å‚è€ƒèµ„æ–™"><a href="#4-å‚è€ƒèµ„æ–™" class="headerlink" title="4.å‚è€ƒèµ„æ–™"></a>4.å‚è€ƒèµ„æ–™</h1><ul><li><a href="https://en.wikipedia.org/wiki/Ear-EEG#History">Ear-EEG_wikipedia</a></li><li><a href="http://deepbci.korea.ac.kr/wp-content/uploads/2019/05/Discription.pdf">éŸ©å›½ssvepæ•°æ®é›†çš„èŒƒå¼è¯´æ˜</a></li><li>Ear-EEG Devices for the Assessment of Brain  Activity: A Review</li></ul></font>]]></content>
    
    
    
    <tags>
      
      <tag>ear-EEG</tag>
      
      <tag>database</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é¢å‘å¯¹è±¡å®ç°æ–‡ä»¶ä¸‹è½½ç³»ç»Ÿ</title>
    <link href="/2024/08/23/4-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F/"/>
    <url>/2024/08/23/4-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<p>Serverç«¯ä»£ç </p><span id="more"></span><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#!/usr/bin/python3</span><br><span class="hljs-comment"># @Time    : 2024/8/24 9:46</span><br><span class="hljs-comment"># @Author  : Proton</span><br><span class="hljs-comment"># @FileName: netdisk_server.py</span><br><span class="hljs-keyword">from</span> socket <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">import</span> struct<br><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Server</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, ip, port</span>):<br>        self.s_listen:socket = <span class="hljs-literal">None</span><br>        self.ip = ip<br>        self.port = port<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">tcp_init</span>(<span class="hljs-params">self</span>):<br>        self.s_listen = socket(AF_INET, SOCK_STREAM)<br>        self.s_listen.bind((self.ip, self.port))<br>        self.s_listen.listen(<span class="hljs-number">128</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">self</span>):<br>        new_client, client_addr = self.s_listen.accept()<br>        <span class="hljs-built_in">print</span>(client_addr)<br>        user = User(new_client)<br>        user.deal_command()<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    æ¯ä¸€ä¸ªuserå¯¹è±¡å¯¹åº”ä¸€ä¸ªå®¢æˆ·ç«¯</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, new_client</span>):<br>        self.user: socket = new_client<br>        self.username = <span class="hljs-literal">None</span><br>        self.path = os.getcwd()  <span class="hljs-comment"># å­˜å‚¨è¿ä¸Šçš„ç”¨æˆ·çš„è·¯å¾„</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">train_send</span>(<span class="hljs-params">self, content_bytes</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        ä»¥å¼€ç«è½¦çš„å½¢å¼å‘é€ï¼Œå…ˆå‘é•¿åº¦ï¼Œå†å‘å†…å®¹</span><br><span class="hljs-string">        :param content:</span><br><span class="hljs-string">        :return:</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        content_len_bytes = struct.pack(<span class="hljs-string">&#x27;I&#x27;</span>, <span class="hljs-built_in">len</span>(content_bytes))<br>        self.user.send(content_len_bytes+content_bytes)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">train_recv</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        å¼€ç«è½¦æ¥æ”¶ï¼Œå…ˆæ¥æ”¶æ–‡ä»¶å/å†…å®¹é•¿åº¦ï¼Œ4Bï¼Œå†æ¥æ”¶æ–‡ä»¶å/å†…å®¹</span><br><span class="hljs-string">        :return:</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        train_head_bytes = self.user.recv(<span class="hljs-number">4</span>)<br>        train_head_len = struct.unpack(<span class="hljs-string">&#x27;I&#x27;</span>, train_head_bytes)<br>        <span class="hljs-comment"># ä¸ºä»€ä¹ˆä¸decodeï¼Œå› ä¸ºä¸ä¸€å®šæ˜¯æ–‡æœ¬ï¼Œä¹Ÿå¯èƒ½æ˜¯éŸ³ä¹orç”µå½±</span><br>        <span class="hljs-keyword">return</span> self.user.recv(train_head_len[<span class="hljs-number">0</span>])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">deal_command</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-comment"># æ¥æ”¶å‘½ä»¤åº”è¯¥ä»¥å¼€ç«è½¦çš„å½¢å¼æ”¶</span><br>            command = self.train_recv().decode(<span class="hljs-string">&#x27;utf8&#x27;</span>)<br>            <span class="hljs-keyword">if</span> command[:<span class="hljs-number">2</span>] == <span class="hljs-string">&#x27;ls&#x27;</span>:<br>                self.do_ls()<br>            <span class="hljs-keyword">elif</span> command[:<span class="hljs-number">2</span>] == <span class="hljs-string">&#x27;cd&#x27;</span>:<br>                self.do_cd(command)<br>            <span class="hljs-keyword">elif</span> command[:<span class="hljs-number">3</span>] == <span class="hljs-string">&#x27;pwd&#x27;</span>:<br>                self.do_pwd()<br>            <span class="hljs-keyword">elif</span> command[:<span class="hljs-number">2</span>] == <span class="hljs-string">&#x27;rm&#x27;</span>:<br>                self.do_rm(command)<br>            <span class="hljs-keyword">elif</span> command[:<span class="hljs-number">4</span>] == <span class="hljs-string">&#x27;puts&#x27;</span>:<br>                self.puts_file()<br>            <span class="hljs-keyword">elif</span> command[:<span class="hljs-number">4</span>] == <span class="hljs-string">&#x27;gets&#x27;</span>:<br>                self.gets_file(command)<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;wrong command.&#x27;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">do_ls</span>(<span class="hljs-params">self</span>):<br>        data = <span class="hljs-string">&#x27;&#x27;</span><br>        cur_list = os.listdir(<span class="hljs-string">&#x27;.&#x27;</span>)<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> cur_list:<br>            data += i + <span class="hljs-string">&#x27; &#x27;</span>*<span class="hljs-number">5</span> + <span class="hljs-built_in">str</span>(os.stat(i).st_size) + <span class="hljs-string">&#x27;\n&#x27;</span><br>        self.train_send(data.encode(<span class="hljs-string">&#x27;utf8&#x27;</span>))<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">do_cd</span>(<span class="hljs-params">self, command</span>):<br>        path = command.split()[<span class="hljs-number">1</span>]<br>        os.chdir(path)<br>        self.path = os.getcwd()<br>        self.train_send(self.path.encode(<span class="hljs-string">&#x27;utf8&#x27;</span>))<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">do_pwd</span>(<span class="hljs-params">self</span>):<br>        self.train_send(self.path.encode(<span class="hljs-string">&#x27;utf8&#x27;</span>))<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">do_rm</span>(<span class="hljs-params">self, command</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ·±åº¦ä¼˜å…ˆéå†ï¼Œå®ç°åˆ é™¤éç©ºæ–‡ä»¶å¤¹</span><br><span class="hljs-string">        :param command:</span><br><span class="hljs-string">        :return:</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        rm_target = command.split()[<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">if</span> os.path.isdir(rm_target) <span class="hljs-keyword">and</span> os.listdir(rm_target):  <span class="hljs-comment"># è‹¥ä¸ºéç©ºç›®å½•</span><br>            file_list = os.listdir(rm_target)  <span class="hljs-comment"># ç»§ç»­å…ˆåˆ æ·±å¤„çš„æ–‡ä»¶</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> file_list:<br>                self.do_rm(command + <span class="hljs-string">&#x27;/&#x27;</span> + i)<br>            os.rmdir(rm_target)  <span class="hljs-comment"># æœ€åå†åˆ æ‰å½“å‰è¿™ä¸ªå·²ç»ç©ºäº†çš„ç›®å½•</span><br>        <span class="hljs-keyword">elif</span> os.path.isdir(rm_target) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> os.listdir(rm_target):  <span class="hljs-comment"># ç©ºç›®å½•</span><br>            os.rmdir(rm_target)<br>        <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># æ™®é€šæ–‡ä»¶</span><br>            os.remove(rm_target)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">puts_file</span>(<span class="hljs-params">self</span>):<br>        data = self.train_recv()<br>        file = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;f[å¤ä»¶]&#x27;</span>, mode=<span class="hljs-string">&#x27;wb&#x27;</span>)<br>        file.write(data)<br>        file.close()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">gets_file</span>(<span class="hljs-params">self, command</span>):<br>        file_name = command.split()[<span class="hljs-number">1</span>]<br>        my_file = <span class="hljs-built_in">open</span>(file_name, mode=<span class="hljs-string">&#x27;rb&#x27;</span>)  <span class="hljs-comment"># å­—èŠ‚æµå½¢å¼æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶</span><br>        data = my_file.read()<br>        self.train_send(data)<br>        my_file.close()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    s = Server(<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-number">2000</span>)<br>    s.tcp_init()<br>    s.task()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>epollå¤šè·¯å¤ç”¨</title>
    <link href="/2024/08/22/3.epoll%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/"/>
    <url>/2024/08/22/3.epoll%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<font size=3><p>ä¸ºäº†å®ç°åŠæ—¶èŠå¤©ï¼Œå³ä¸¤æ–¹å¯ä»¥ä»»æ„å‘å¯¹æ–¹å‘é€è¿ç»­çš„å¤šæ¡æ¶ˆæ¯çš„åŠŸèƒ½ï¼Œéœ€è¦ä½¿ç”¨epollã€‚åœ¨å†…æ ¸ä¸­ï¼Œsocketå¯¹è±¡ç¼“å†²åŒºrecv()ã€æ ‡å‡†è¾“å…¥ç¼“å†²åŒºinput()éƒ½åˆ†é…äº†ä¸€æ®µå†…å­˜ï¼Œå†…å­˜å¯¹åº”ä¸€ä¸ª<strong>æ•´å‹ç¼–å·</strong>ï¼ˆæ•°ç»„ä¸‹æ ‡ï¼‰ï¼Œè¿™ä¸ªç¼–å·å°±æ˜¯<strong>æ–‡ä»¶æè¿°ç¬¦file describer</strong>ã€‚</p><span id="more"></span><p>æˆ‘ä»¬åˆ›å»ºepollå¯¹è±¡ï¼Œæ³¨å†Œè¦ç›‘æ§çš„fdå’Œäº‹ä»¶ç±»å‹ï¼Œè®©epollå»ç›‘æ§å“ªå‡ ä¸ªç¼“å†²åŒºå‘ç”Ÿäº†æŒ‡å®šäº‹ä»¶ï¼Œä»¥åˆ—è¡¨çš„å½¢å¼ä¸»åŠ¨æŠ¥å‘Šç»™ç”¨æˆ·è¿›ç¨‹ã€‚</p><h1 id="1-ä½¿ç”¨epollç¼–å†™å³æ—¶èŠå¤©"><a href="#1-ä½¿ç”¨epollç¼–å†™å³æ—¶èŠå¤©" class="headerlink" title="1.ä½¿ç”¨epollç¼–å†™å³æ—¶èŠå¤©"></a>1.ä½¿ç”¨epollç¼–å†™å³æ—¶èŠå¤©</h1><details><summary>æœåŠ¡å™¨ä»£ç </summary><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> select<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">tcp_server</span>():<br>    server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>    s_addr = (<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-number">2000</span>)<br>    server.bind(s_addr)<br>    server.listen(<span class="hljs-number">128</span>)  <span class="hljs-comment"># è¢«åŠ¨ç›‘å¬ï¼Œæ¿€æ´»ç«¯å£</span><br>    new_client, new_client_addr = server.accept()<br>    <span class="hljs-built_in">print</span>(new_client_addr)<br>    epoll = select.epoll()  <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªepollå¯¹è±¡</span><br>    <span class="hljs-comment"># æ³¨å†Œè¦ç›‘æ§çš„ç¼“å†²åŒºï¼Œå‘ç”ŸæŒ‡å®šäº‹ä»¶å‘ç”¨æˆ·è¿›ç¨‹æ±‡æŠ¥</span><br>    epoll.register(new_client.fileno(), select.EPOLLIN)<br>    epoll.register(sys.stdin.fileno(), select.EPOLLIN)<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-comment"># ä¸€ç›´ç­‰åªä¼šåœ¨è¿™é‡Œå¡ä½ï¼Œè°çš„ç¼“å†²åŒºæœ‰æ•°æ®ï¼Œå°±å¡«å†™åˆ°eventslistï¼Œåˆ—è¡¨é‡Œå˜å­˜å…ƒç»„ (fd, äº‹ä»¶)</span><br>        events_list = epoll.poll(-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">for</span> fd,event <span class="hljs-keyword">in</span> events_list:<br>            <span class="hljs-keyword">if</span> fd == new_client.fileno():<br>                <span class="hljs-comment"># recvç¼“å†²åŒºæœ‰æ•°æ®</span><br>                data = new_client.recv(<span class="hljs-number">100</span>).decode(<span class="hljs-string">&#x27;utf8&#x27;</span>)<br>                <span class="hljs-keyword">if</span> data:<br>                    <span class="hljs-built_in">print</span>(data)<br>                <span class="hljs-keyword">else</span>:<span class="hljs-comment"># ä¸€æ—¦å¯¹ç«¯æ–­å¼€ï¼Œrecvä¸ä¼šå¡ä¸»ï¼Œä¼šè¿”å›ç©º,å†…æ ¸ä¼šæŠŠclientæ ‡è®°ä¸ºä¸€ç›´å¯è¯»</span><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å¯¹æ–¹æ–­å¼€äº†&#x27;</span>)<br>                    <span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">elif</span> fd == sys.stdin.fileno():<br>                <span class="hljs-comment"># inputç¼“å†²åŒºæœ‰æ•°æ®</span><br>                <span class="hljs-keyword">try</span>:  <span class="hljs-comment"># æŒ‰ctrl dè®©æœåŠ¡å™¨æ–­å¼€</span><br>                    data = <span class="hljs-built_in">input</span>()<br>                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ä¸æƒ³è¾“å…¥äº†ï¼ŒI want leave&#x27;</span>)<br>                    <span class="hljs-keyword">return</span><br>                new_client.send(data.encode(<span class="hljs-string">&#x27;utf8&#x27;</span>))<br>    server.close()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    tcp_server()<br><br></code></pre></td></tr></table></figure></details><p><img src="https://s2.loli.net/2024/08/22/XPfIjBzTDE5MmiH.png" alt="å³æ—¶èŠå¤©æµ‹è¯•ç»“æœ"></p><h1 id="2-ä½¿ç”¨epollå®ç°èŠå¤©å®¤"><a href="#2-ä½¿ç”¨epollå®ç°èŠå¤©å®¤" class="headerlink" title="2.ä½¿ç”¨epollå®ç°èŠå¤©å®¤"></a>2.ä½¿ç”¨epollå®ç°èŠå¤©å®¤</h1><div class="note note-info">            <p>å®ç°å¤šäººèŠå¤©ï¼Œ</p><ol><li>æ–°å¢å®¢æˆ·ç«¯æ–­å¼€åå¯ä»¥å†æ¬¡è¿æ¥ï¼ŒæœåŠ¡å™¨ç«¯ä¸ä¼šé€€å‡ºï¼ˆepollè§£é™¤ç»‘å®šã€å…³é—­clientå¯¹è±¡ï¼‰;</li><li>æ–°å»ºä¸€ä¸ªclientåˆ—è¡¨ï¼Œå­˜å‚¨æ¯ä¸ªå®¢æˆ·ç«¯å¯¹è±¡ï¼Œå¾ªç¯éå†æŸ¥çœ‹ç¼“å†²åŒºæœ‰æ— æ•°æ®ï¼›</li><li>æ–‡ä»¶åè®®è®¾è®¡ï¼ŒèŠå¤©å®¤å¢åŠ ç”¨æˆ·ååŠŸèƒ½ã€‚</li></ol>          </div><p><img src="https://s2.loli.net/2024/08/23/UaLvRpJhrT8jtC9.png" alt="èŠå¤©å®¤æµ‹è¯•ç»“æœ"></p><h1 id="3-æŒç»­å‘é€å¤šä¸ªæ–‡ä»¶ï¼Œåè®®è®¾è®¡"><a href="#3-æŒç»­å‘é€å¤šä¸ªæ–‡ä»¶ï¼Œåè®®è®¾è®¡" class="headerlink" title="3.æŒç»­å‘é€å¤šä¸ªæ–‡ä»¶ï¼Œåè®®è®¾è®¡"></a>3.æŒç»­å‘é€å¤šä¸ªæ–‡ä»¶ï¼Œåè®®è®¾è®¡</h1><div class="note note-warning">            <p>ä½¿ç”¨TCPè¿æ¥å‘é€æ–‡ä»¶æ—¶ï¼Œé¦–å…ˆè¦ä»¥<strong>å­—èŠ‚æµ</strong>å½¢å¼ä¼ é€ï¼Œå¦‚æœæŒç»­å‘é€å¤šä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶å1+æ–‡ä»¶1å†…å®¹+æ–‡ä»¶å2+æ–‡ä»¶2å†…å®¹+ã€‚ã€‚ã€‚å­˜åœ¨<strong>ç²˜åŒ…</strong>é—®é¢˜ï¼Œä¸¤æ¬¡å‘é€çš„æŠ¥æ–‡æŒ¨åœ¨ä¸€èµ·ï¼Œåˆ†ä¸å¼€ã€‚</p>          </div><p>æˆ‘ä»¬é‡‡ç”¨<strong>å¼€ç«è½¦çš„æ–¹å¼</strong>è§£å†³ç²˜åŒ…ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><ol><li>å°ç«è½¦</li></ol><ul><li>ç«è½¦å¤´å¡«å†™é•¿åº¦ï¼šå­—èŠ‚æ•°ï¼Œpythonéœ€packä¸º4å­—èŠ‚æ•´å‹æ•°</li><li>ç«è½¦è½¦å¢å¡«å†™å†…å®¹ï¼šå­—ç¬¦ä¸²å­—èŠ‚æµ</li></ul><table><thead><tr><th align="center"></th><th align="center">æ–‡ä»¶å</th><th align="center">æ–‡ä»¶å†…å®¹</th></tr></thead><tbody><tr><td align="center">è½¦å¤´</td><td align="center">æ–‡ä»¶åé•¿åº¦(4B)</td><td align="center">æ–‡ä»¶å†…å®¹æ€»é•¿åº¦(4B)</td></tr><tr><td align="center">è½¦å¢</td><td align="center">æ–‡ä»¶å</td><td align="center">æ–‡ä»¶å†…å®¹</td></tr></tbody></table><p><strong>Pythonçš„structæ¨¡å—</strong>ï¼Œæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œèƒ½å°†intã€floatç­‰åŸºæœ¬æ•°æ®ç±»å‹æ‰“åŒ…æˆå­—ç¬¦ä¸²ï¼ˆå®é™…ä¸Šç›¸å½“äºå…¶ä»–è¯­è¨€çš„å­—èŠ‚æµï¼‰ï¼Œå¯ä»¥åœ¨ç½‘ç»œä¸Šä¼ è¾“ï¼Œè€Œæ¥æ”¶ç«¯ä¹Ÿå¯ä»¥é€šè¿‡è§£åŒ…è¿˜åŸå‡ºåˆå§‹çš„æ•°æ®ã€‚</p><ul><li><p>pack(fmt, var1, var2,â€¦)<br>æŒ‰ç…§ç»™å®šçš„æ ¼å¼(fmt)ï¼ŒæŠŠæ•°æ®å°è£…æˆå­—ç¬¦ä¸²(å®é™…ä¸Šç±»ä¼¼äºCç»“æ„ä½“çš„å­—èŠ‚æµ);</p></li><li><p>unpack(fmt, string)<br>æŒ‰ç…§ç»™å®šçš„æ ¼å¼(fmt)è§£æå­—èŠ‚æµ(string)ï¼Œ<strong>è¿”å›</strong>è§£æå‡ºæ¥çš„<strong>tuple</strong>å…ƒç»„;</p></li><li><p>calcsize(fmt)<br>è®¡ç®—ç»™å®šçš„æ ¼å¼(fmt)å ç”¨å¤šå°‘å­—èŠ‚çš„å†…å­˜</p></li><li><p><a href="https://blog.csdn.net/yzy1103203312/article/details/78238004">Pythonä¸­çš„structæ¨¡å—</a></p></li></ul><h1 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h1><ul><li>å†™ä»£ç çš„æ—¶å€™å¯¹ä¸ç¡®å®šçš„ä»£ç å®ç°æ•ˆæœï¼Œ<strong>è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªç®€å•çš„ä¾‹å­</strong>éªŒè¯ä¸€ä¸‹å°±å¯ä»¥ï¼Œè¿™æ ·å°±ä¸è‡³äºä»£ç å†™äº†ä¸€å¤§å †ï¼Œä¸ç¡®å®šé”™è¯¯åœ¨å“ªé‡Œã€‚</li></ul><p><img src="https://s2.loli.net/2024/08/23/gY1eD3LfumUjVsb.png" alt=".png"></p></font>]]></content>
    
    
    
    <tags>
      
      <tag>socket</tag>
      
      <tag>epoll</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
